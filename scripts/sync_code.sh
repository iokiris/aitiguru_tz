#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∫–æ–¥–∞ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º
set -e

echo "üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–¥–∞ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω
if ! docker ps | grep -q order_management_fastapi; then
    echo "‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä FastAPI –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ docker-compose up -d"
    exit 1
fi

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∫–æ–¥
echo "üìÅ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä..."
docker cp . order_management_fastapi:/app/

echo "‚úÖ –ö–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω!"
echo ""
echo "üîÑ –î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:"
echo "   docker-compose restart fastapi"
echo ""
echo "üìù –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ FastAPI:"
echo "   docker restart order_management_fastapi"
